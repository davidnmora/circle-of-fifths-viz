(this["webpackJsonpcircle-of-fifths-viz"]=this["webpackJsonpcircle-of-fifths-viz"]||[]).push([[0],{25:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var o,a,c,r,u,i,s,m,b=n(0),l=n.n(b),d=n(16),f=n.n(d),N=(n(25),n(4)),h=n(3),j=n(34),v=n(33),x=n(35),O=n(13),p=n(2),I=n(32),g=n(6),C=n(20),A=n(5),F=function(e){return H[e%12]},y=254,B=function(e){return{noteName:F(e),octave:Math.floor(e/12-1),noteNum:e}},E=function(e,t){var n=e.data||[],o=Object(p.a)(n,3),a=o[0],c=o[1],r=o[2];if(void 0!==c&&a!==y){var u=0===r;t(B(c),u)}},M=function(e){Object(b.useEffect)((function(){!function(e){navigator.requestMIDIAccess().then((function(t){var n,o=Object(A.a)(t.inputs.values());try{for(o.s();!(n=o.n()).done;)n.value.onmidimessage=function(t){return E(t,e)}}catch(a){o.e(a)}finally{o.f()}}))}(e)}),[])},D=n(1),S={bassNote:null,trebleNotes:[],trebleMin:{noteName:"A",octave:4,noteNum:69},trebleMax:{noteName:"A",octave:5,noteNum:81}},k=Object(b.createContext)({}),G=function(){return Object(b.useContext)(k).inputState.bassNote||{}},R=function(){return Object(b.useContext)(k).inputState.trebleNotes},K=function(){var e=Object(b.useContext)(k).inputState;return{trebleMin:e.trebleMin,trebleMax:e.trebleMax}},w=function(){return Object(b.useContext)(k).updateInputState},P=function(e){var t=e.children,n=Object(C.a)(S),o=Object(p.a)(n,2),a=o[0],c=o[1];return M((function(e,t){var n=e.noteNum<a.trebleMin.noteNum;c(n?function(n){t?e.noteNum===(n.bassNote||{}).noteNum&&(n.bassNote=null):n.bassNote=e}:function(n){t?n.trebleNotes=n.trebleNotes.filter((function(t){return t.noteNum!==e.noteNum})):n.trebleNotes.push(e)})})),Object(D.jsx)(k.Provider,{value:{inputState:a,updateInputState:c},children:t})},z={C:["C","D","E","F","G","A","B"],G:["C","D","E","F#","G","A","B"],D:["C#","D","E","F#","G","A","B"],A:["C#","D","E","F#","Ab","A","B"],E:["C#","Eb","E","F#","Ab","A","B"],B:["C#","Eb","E","F#","Ab","Bb","B"],"F#":["C#","Eb","F","F#","Ab","Bb","B"],"C#":["C#","Eb","F","F#","Ab","Bb","C"],Ab:["C#","Eb","F","G","Ab","Bb","C"],Eb:["D","Eb","F","G","Ab","Bb","C"],Bb:["D","Eb","F","G","A","Bb","C"],F:["D","E","F","G","A","Bb","C"]},J=2*Math.PI/12,T=function(e){var t=e.map((function(e){return V(L[e].fifthsIndex)}));if(!t.length)return{};var n=function(e){var t=Object(g.a)(e).sort(),n=!1,o=t.map((function(e,o){var a=t[o-1];return void 0!==a&&Math.round(100*(e-a))>Math.round(100*J)&&(n=!0),n?e-2*Math.PI:e}));return Object(g.a)(o).sort()}(t);return{startAngle:Math.min.apply(Math,Object(g.a)(n))-J/2,endAngle:Math.max.apply(Math,Object(g.a)(n))+J/2}},q=function(){var e=function(){var e=G(),t=R(),n=[].concat(Object(g.a)(t.map((function(e){return e.noteName}))),Object(g.a)(e.noteName?[e.noteName]:[]));return Object.keys(z).filter((function(e){var t=z[e];return!n.some((function(e){return!t.includes(e)}))}))}();return T(e)},V=function(e){return J*e},H=["C","C#","D","Eb","E","F","F#","G","Ab","A","Bb","B"],L={C:{noteName:"C",fifthsIndex:0,chromaticIndex:0},G:{noteName:"G",fifthsIndex:1,chromaticIndex:7},D:{noteName:"D",fifthsIndex:2,chromaticIndex:2},A:{noteName:"A",fifthsIndex:3,chromaticIndex:9},E:{noteName:"E",fifthsIndex:4,chromaticIndex:4},B:{noteName:"B",fifthsIndex:5,chromaticIndex:11},"F#":{noteName:"F#",fifthsIndex:6,chromaticIndex:6},"C#":{noteName:"C#",fifthsIndex:7,chromaticIndex:1},Ab:{noteName:"Ab",fifthsIndex:8,chromaticIndex:8},Eb:{noteName:"Eb",fifthsIndex:9,chromaticIndex:3},Bb:{noteName:"Bb",fifthsIndex:10,chromaticIndex:10},F:{noteName:"F",fifthsIndex:11,chromaticIndex:5}},Q=200,U=500,W=500,X="#bdc3c7",Y=Object.values(L).map((function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=V(e),a=Object(I.a)(o,t),c=Object(p.a)(a,2),r=c[0],u=c[1],i=n?16*Math.random():0;return[r+W/2+i,u+U/2+i]}(e.fifthsIndex,200),n=Object(p.a)(t,2),o=n[0],a=n[1];return Object(O.a)(Object(O.a)({},e),{},{x:o,y:a,color:X})})),Z=Object(v.a)(0,12),$=Object(j.a)().domain(Z).range([0,2*Math.PI]).paddingInner(.05).paddingOuter(.05),_=Object(x.a)(),ee=h.c.path(o||(o=Object(N.a)(["\n  fill: ",";\n"])),(function(e){var t=e.theme;return e.noteIssSelectedButNotInKey?t.highlights.hot:t.highlights.bright})),te=function(e){var t=e.noteIndex,n=e.innerRadius,o=e.outerRadius,a=e.noteNum,c=F(a),r=function(e,t){var n=R().some((function(t){return t.noteNum===e})),o=Y[t].noteName,a=z[o].includes(B(e).noteName),c=G(),r=n&&!a;return n?c.noteName===Y[t].noteName?{noteIssSelectedButNotInKey:r,opacity:1}:{noteIssSelectedButNotInKey:r,opacity:a?.4:.1}:{noteIssSelectedButNotInKey:r,opacity:a?.05:.01}}(a,t),u=r.noteIssSelectedButNotInKey,i=r.opacity,s=function(e){var t=$.bandwidth(),n=$(e)-t/2;return{startAngle:n,endAngle:n+t}}(t),m=s.startAngle,b=s.endAngle,l=_({innerRadius:n,outerRadius:o,startAngle:m,endAngle:b});return Object(D.jsx)(ee,{transform:"translate(".concat(W/2,", ").concat(U/2,")"),d:l,opacity:i,noteIssSelectedButNotInKey:u,title:c})},ne=function(e){var t=e.noteNum,n=function(e){var t=K(),n=t.trebleMin,o=t.trebleMax,a=Object(j.a)().domain(Object(v.a)(n.noteNum,o.noteNum+1)).range([20,170]).paddingInner(.05),c=a(e);return{innerRadius:c,outerRadius:c+a.bandwidth()}}(t),o=n.innerRadius,a=n.outerRadius;return Z.map((function(e){return Object(D.jsx)(te,{innerRadius:o,outerRadius:a,noteIndex:e,noteNum:t},e)}))},oe=function(){var e=K(),t=e.trebleMin,n=e.trebleMax,o=Object(v.a)(t.noteNum,n.noteNum+1);return Object(D.jsx)("g",{children:o.map((function(e){return Object(D.jsx)(ne,{noteNum:e},e)}))})},ae=h.c.text(a||(a=Object(N.a)(["\n  fill: ",";\n  opacity: ",";\n  font-size: ",";\n  cursor: pointer;\n"])),(function(e){return e.theme.primary.medium}),(function(e){return e.selected?1:.6}),(function(e){return e.selected?"24px":"20px"})),ce=function(){var e=G(),t=w(),n=K().trebleMin;return Object(D.jsx)("g",{children:Y.map((function(o){var a=o.x,c=o.y,r=o.noteName;return Object(D.jsx)("g",{transform:"translate(".concat(a,",").concat(c,")"),children:Object(D.jsx)(ae,{onClick:function(){return t((function(e){e.bassNote={noteNum:0,noteName:r,octave:n.octave-1}}))},selected:e.noteName===r,children:r})},r)}))})},re=Q-20,ue=re-10,ie=Object(x.a)(),se=h.c.path(c||(c=Object(N.a)(["\n  transform: rotate(","rad)\n    translate(","px, ","px);\n  transition: 0.5s transform;\n  transform-origin: ","px ","px;\n"])),(function(e){return e.rotation}),W/2,U/2,W/2,U/2),me=function(){var e=Object(h.d)(),t=q(),n=t.startAngle,o=t.endAngle;if([n,o].includes(void 0))return null;var a=ie({innerRadius:ue,outerRadius:re,startAngle:0,endAngle:o-n}),c=n>=Math.PI?-(2*Math.PI-n):n;return Object(D.jsx)(se,{rotation:c,transform:"translate(".concat(W/2,", ").concat(U/2,")"),d:a,fill:e.secondary.cool,opacity:1})},be=h.c.svg(r||(r=Object(N.a)(["\n  background-color: ",";\n"])),(function(e){return e.theme.neutral.dark})),le=function(){return Object(D.jsx)("div",{children:Object(D.jsxs)(be,{height:U,width:W,children:[Object(D.jsx)(ce,{}),Object(D.jsx)(oe,{}),Object(D.jsx)(me,{})]})})},de=[[{noteName:"E",octave:5,noteNum:76},{noteName:"F",octave:5,noteNum:77}],[{noteName:"C",octave:5,noteNum:72},{noteName:"D",octave:5,noteNum:74},{noteName:"G",octave:5,noteNum:79}],[{noteName:"C",octave:5,noteNum:72},{noteName:"E",octave:5,noteNum:76},{noteName:"G",octave:5,noteNum:79},{noteName:"Bb",octave:5,noteNum:81}],[{noteName:"C",octave:5,noteNum:72},{noteName:"Eb",octave:5,noteNum:75},{noteName:"G",octave:5,noteNum:79},{noteName:"Bb",octave:5,noteNum:81}],[{noteName:"C",octave:5,noteNum:72},{noteName:"E",octave:5,noteNum:76},{noteName:"G",octave:5,noteNum:79}],[{noteName:"C",octave:5,noteNum:72},{noteName:"Eb",octave:5,noteNum:75},{noteName:"G",octave:5,noteNum:79}]],fe=[{noteName:"F",octave:3,noteNum:53},{noteName:"F#",octave:3,noteNum:54},{noteName:"G",octave:3,noteNum:55},{noteName:"Ab",octave:3,noteNum:56},{noteName:"A",octave:3,noteNum:57},{noteName:"Bb",octave:3,noteNum:58},{noteName:"B",octave:3,noteNum:59},{noteName:"C",octave:4,noteNum:60},{noteName:"C#",octave:4,noteNum:61},{noteName:"D",octave:4,noteNum:62},{noteName:"Eb",octave:4,noteNum:63},{noteName:"E",octave:4,noteNum:64}],Ne=function(){var e=w(),t=Object(b.useState)(null),n=Object(p.a)(t,2),o=n[0],a=n[1],c=Object(b.useState)(null),r=Object(p.a)(c,2),u=r[0],i=r[1];return Object(D.jsxs)("div",{children:[Object(D.jsx)(Oe,{children:"Select Treble notes:"}),de.map((function(t,n){return Object(D.jsx)("button",{onClick:function(){o===n?(a(null),e((function(e){e.trebleNotes=[]}))):(a(n),e((function(e){e.trebleNotes=t})))},style:{opacity:o===n?1:.7},children:"Make note ".concat(t.map((function(e){return e.noteName})).toString())},n)})),Object(D.jsx)(Oe,{children:"Select Bass note:"}),fe.map((function(t,n){return Object(D.jsx)("button",{onClick:function(){u===n?(i(null),e((function(e){e.bassNote=null}))):(i(n),e((function(e){e.bassNote=t})))},style:{opacity:u===n?1:.7},children:"Make note ".concat(t.noteName)},t.noteName)}))]})},he=Object(h.b)(u||(u=Object(N.a)(["\n  body {\n    background-color: ",";\n    font-family: 'Karla', sans-serif;\n    color: ",";\n  }\n"])),(function(e){return e.theme.neutral.dark}),(function(e){return e.theme.neutral.light})),je={primary:{dark:"#5146D9",medium:"#9D70FC",light:"#BDA1F6"},secondary:{cool:"#95CEE0"},highlights:{hot:"#FF6D3F",bright:"#FFEC3F"},neutral:{dark:"#1D1763",medium:"#8A87AC",light:"#F0F0F0"}},ve=function(e){var t=e.children;return Object(D.jsxs)(h.a,{theme:je,children:[Object(D.jsx)(he,{})," ",t]})},xe=h.c.h1(i||(i=Object(N.a)(["\n  color: ",";\n"])),(function(e){return e.theme.neutral.medium})),Oe=h.c.h3(s||(s=Object(N.a)(["\n  color: ",";\n"])),(function(e){return e.theme.neutral.medium})),pe=h.c.span(m||(m=Object(N.a)(["\n  color: ",";\n  background-color: ",";\n"])),(function(e){return e.theme.neutral.dark}),(function(e){return e.theme.secondary.cool})),Ie=function(){return Object(D.jsx)(P,{children:Object(D.jsx)(ve,{children:Object(D.jsxs)("div",{children:[Object(D.jsxs)("header",{children:[Object(D.jsx)(xe,{children:"Circle of Fifths Viz"}),"The ",Object(D.jsx)(pe,{children:"Blue Key Center arc"})," ","highlights the (major) key centers your chord could belong within (if any)"]}),Object(D.jsx)(Ne,{}),Object(D.jsx)(le,{})]})})})};f.a.render(Object(D.jsx)(l.a.StrictMode,{children:Object(D.jsx)(Ie,{})}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.e80da56b.chunk.js.map