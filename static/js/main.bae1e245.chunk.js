(this["webpackJsonpcircle-of-fifths-viz"]=this["webpackJsonpcircle-of-fifths-viz"]||[]).push([[0],{25:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var o,a,c,r,u,i,s,m,b=n(0),l=n.n(b),d=n(16),f=n.n(d),N=(n(25),n(4)),h=n(3),j=n(34),v=n(33),x=n(35),O=n(13),p=n(2),I=n(32),g=n(6),C=n(20),A=n(5),F=254,y=function(e){return{noteName:["C","C#","D","Eb","E","F","F#","G","Ab","A","Bb","B"][e%12],octave:Math.floor(e/12-1),noteNum:e}},B=function(e,t){var n=e.data||[],o=Object(p.a)(n,3),a=o[0],c=o[1],r=o[2];if(void 0!==c&&a!==F){var u=0===r;t(y(c),u)}},E=function(e){Object(b.useEffect)((function(){!function(e){navigator.requestMIDIAccess().then((function(t){var n,o=Object(A.a)(t.inputs.values());try{for(o.s();!(n=o.n()).done;)n.value.onmidimessage=function(t){return B(t,e)}}catch(a){o.e(a)}finally{o.f()}}))}(e)}),[])},M=n(1),D={bassNote:null,trebleNotes:[],trebleMin:{noteName:"A",octave:4,noteNum:69},trebleMax:{noteName:"A",octave:5,noteNum:81}},S=Object(b.createContext)({}),k=function(){return Object(b.useContext)(S).inputState.bassNote||{}},G=function(){return Object(b.useContext)(S).inputState.trebleNotes},R=function(){var e=Object(b.useContext)(S).inputState;return{trebleMin:e.trebleMin,trebleMax:e.trebleMax}},K=function(){return Object(b.useContext)(S).updateInputState},w=function(e){var t=e.children,n=Object(C.a)(D),o=Object(p.a)(n,2),a=o[0],c=o[1];return E((function(e,t){var n=e.noteNum<a.trebleMin.noteNum;c(n?function(n){t?e.noteNum===(n.bassNote||{}).noteNum&&(n.bassNote=null):n.bassNote=e}:function(n){t?n.trebleNotes=n.trebleNotes.filter((function(t){return t.noteNum!==e.noteNum})):n.trebleNotes.push(e)})})),Object(M.jsx)(S.Provider,{value:{inputState:a,updateInputState:c},children:t})},P={C:["C","D","E","F","G","A","B"],G:["C","D","E","F#","G","A","B"],D:["C#","D","E","F#","G","A","B"],A:["C#","D","E","F#","Ab","A","B"],E:["C#","Eb","E","F#","Ab","A","B"],B:["C#","Eb","E","F#","Ab","Bb","B"],"F#":["C#","Eb","F","F#","Ab","Bb","B"],"C#":["C#","Eb","F","F#","Ab","Bb","C"],Ab:["C#","Eb","F","G","Ab","Bb","C"],Eb:["D","Eb","F","G","Ab","Bb","C"],Bb:["D","Eb","F","G","A","Bb","C"],F:["D","E","F","G","A","Bb","C"]},z=2*Math.PI/12,J=function(e){var t=e.map((function(e){return q(V[e].fifthsIndex)}));if(!t.length)return{};var n=function(e){var t=Object(g.a)(e).sort(),n=!1,o=t.map((function(e,o){var a=t[o-1];return void 0!==a&&Math.round(100*(e-a))>Math.round(100*z)&&(n=!0),n?e-2*Math.PI:e}));return Object(g.a)(o).sort()}(t);return{startAngle:Math.min.apply(Math,Object(g.a)(n))-z/2,endAngle:Math.max.apply(Math,Object(g.a)(n))+z/2}},T=function(){var e=function(){var e=k(),t=G(),n=[].concat(Object(g.a)(t.map((function(e){return e.noteName}))),Object(g.a)(e.noteName?[e.noteName]:[]));return Object.keys(P).filter((function(e){var t=P[e];return!n.some((function(e){return!t.includes(e)}))}))}();return J(e)},q=function(e){return z*e},V={C:{noteName:"C",fifthsIndex:0,chromaticIndex:0},G:{noteName:"G",fifthsIndex:1,chromaticIndex:7},D:{noteName:"D",fifthsIndex:2,chromaticIndex:2},A:{noteName:"A",fifthsIndex:3,chromaticIndex:9},E:{noteName:"E",fifthsIndex:4,chromaticIndex:4},B:{noteName:"B",fifthsIndex:5,chromaticIndex:11},"F#":{noteName:"F#",fifthsIndex:6,chromaticIndex:6},"C#":{noteName:"C#",fifthsIndex:7,chromaticIndex:1},Ab:{noteName:"Ab",fifthsIndex:8,chromaticIndex:8},Eb:{noteName:"Eb",fifthsIndex:9,chromaticIndex:3},Bb:{noteName:"Bb",fifthsIndex:10,chromaticIndex:10},F:{noteName:"F",fifthsIndex:11,chromaticIndex:5}},H=200,L=500,Q=500,U="#bdc3c7",W=Object.values(V).map((function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=q(e),a=Object(I.a)(o,t),c=Object(p.a)(a,2),r=c[0],u=c[1],i=n?16*Math.random():0;return[r+Q/2+i,u+L/2+i]}(e.fifthsIndex,200),n=Object(p.a)(t,2),o=n[0],a=n[1];return Object(O.a)(Object(O.a)({},e),{},{x:o,y:a,color:U})})),X=Object(v.a)(0,12),Y=Object(j.a)().domain(X).range([0,2*Math.PI]).paddingInner(.05).paddingOuter(.05),Z=Object(x.a)(),$=h.c.path(o||(o=Object(N.a)(["\n  fill: ",";\n"])),(function(e){var t=e.theme;return e.noteIssSelectedButNotInKey?t.highlights.hot:t.highlights.bright})),_=function(e){var t=e.noteIndex,n=e.innerRadius,o=e.outerRadius,a=function(e,t){var n=G().some((function(t){return t.noteNum===e})),o=W[t].noteName,a=P[o].includes(y(e).noteName),c=k(),r=n&&!a;return n?c.noteName===W[t].noteName?{noteIssSelectedButNotInKey:r,opacity:1}:{noteIssSelectedButNotInKey:r,opacity:a?.4:.1}:{noteIssSelectedButNotInKey:r,opacity:a?.05:.01}}(e.noteNum,t),c=a.noteIssSelectedButNotInKey,r=a.opacity,u=function(e){var t=Y.bandwidth(),n=Y(e)-t/2;return{startAngle:n,endAngle:n+t}}(t),i=u.startAngle,s=u.endAngle,m=Z({innerRadius:n,outerRadius:o,startAngle:i,endAngle:s});return Object(M.jsx)($,{transform:"translate(".concat(Q/2,", ").concat(L/2,")"),d:m,opacity:r,noteIssSelectedButNotInKey:c})},ee=function(e){var t=e.noteNum,n=function(e){var t=R(),n=t.trebleMin,o=t.trebleMax,a=Object(j.a)().domain(Object(v.a)(n.noteNum,o.noteNum+1)).range([20,170]).paddingInner(.05),c=a(e);return{innerRadius:c,outerRadius:c+a.bandwidth()}}(t),o=n.innerRadius,a=n.outerRadius;return X.map((function(e){return Object(M.jsx)(_,{innerRadius:o,outerRadius:a,noteIndex:e,noteNum:t},e)}))},te=function(){var e=R(),t=e.trebleMin,n=e.trebleMax,o=Object(v.a)(t.noteNum,n.noteNum+1);return Object(M.jsx)("g",{children:o.map((function(e){return Object(M.jsx)(ee,{noteNum:e},e)}))})},ne=h.c.text(a||(a=Object(N.a)(["\n  fill: ",";\n  opacity: ",";\n  font-size: ",";\n  cursor: pointer;\n"])),(function(e){return e.theme.primary.medium}),(function(e){return e.selected?1:.6}),(function(e){return e.selected?"24px":"20px"})),oe=function(){var e=k(),t=K(),n=R().trebleMin;return Object(M.jsx)("g",{children:W.map((function(o){var a=o.x,c=o.y,r=o.noteName;return Object(M.jsx)("g",{transform:"translate(".concat(a,",").concat(c,")"),children:Object(M.jsx)(ne,{onClick:function(){return t((function(e){e.bassNote={noteNum:0,noteName:r,octave:n.octave-1}}))},selected:e.noteName===r,children:r})},r)}))})},ae=H-20,ce=ae-10,re=Object(x.a)(),ue=h.c.path(c||(c=Object(N.a)(["\n  transform: rotate(","rad)\n    translate(","px, ","px);\n  transition: 0.5s transform;\n  transform-origin: ","px ","px;\n"])),(function(e){return e.rotation}),Q/2,L/2,Q/2,L/2),ie=function(){var e=Object(h.d)(),t=T(),n=t.startAngle,o=t.endAngle;if([n,o].includes(void 0))return null;var a=re({innerRadius:ce,outerRadius:ae,startAngle:0,endAngle:o-n}),c=n>=Math.PI?-(2*Math.PI-n):n;return Object(M.jsx)(ue,{rotation:c,transform:"translate(".concat(Q/2,", ").concat(L/2,")"),d:a,fill:e.secondary.cool,opacity:1})},se=h.c.svg(r||(r=Object(N.a)(["\n  background-color: ",";\n"])),(function(e){return e.theme.neutral.dark})),me=function(){return Object(M.jsx)("div",{children:Object(M.jsxs)(se,{height:L,width:Q,children:[Object(M.jsx)(oe,{}),Object(M.jsx)(te,{}),Object(M.jsx)(ie,{})]})})},be=[[{noteName:"E",octave:5,noteNum:76},{noteName:"F",octave:5,noteNum:77}],[{noteName:"C",octave:5,noteNum:72},{noteName:"D",octave:5,noteNum:74},{noteName:"G",octave:5,noteNum:79}],[{noteName:"C",octave:5,noteNum:72},{noteName:"E",octave:5,noteNum:76},{noteName:"G",octave:5,noteNum:79},{noteName:"Bb",octave:5,noteNum:81}],[{noteName:"C",octave:5,noteNum:72},{noteName:"Eb",octave:5,noteNum:75},{noteName:"G",octave:5,noteNum:79},{noteName:"Bb",octave:5,noteNum:81}],[{noteName:"C",octave:5,noteNum:72},{noteName:"E",octave:5,noteNum:76},{noteName:"G",octave:5,noteNum:79}],[{noteName:"C",octave:5,noteNum:72},{noteName:"Eb",octave:5,noteNum:75},{noteName:"G",octave:5,noteNum:79}]],le=[{noteName:"F",octave:3,noteNum:53},{noteName:"F#",octave:3,noteNum:54},{noteName:"G",octave:3,noteNum:55},{noteName:"Ab",octave:3,noteNum:56},{noteName:"A",octave:3,noteNum:57},{noteName:"Bb",octave:3,noteNum:58},{noteName:"B",octave:3,noteNum:59},{noteName:"C",octave:4,noteNum:60},{noteName:"C#",octave:4,noteNum:61},{noteName:"D",octave:4,noteNum:62},{noteName:"Eb",octave:4,noteNum:63},{noteName:"E",octave:4,noteNum:64}],de=function(){var e=K(),t=Object(b.useState)(null),n=Object(p.a)(t,2),o=n[0],a=n[1],c=Object(b.useState)(null),r=Object(p.a)(c,2),u=r[0],i=r[1];return Object(M.jsxs)("div",{children:[Object(M.jsx)(ve,{children:"Select Treble notes:"}),be.map((function(t,n){return Object(M.jsx)("button",{onClick:function(){o===n?(a(null),e((function(e){e.trebleNotes=[]}))):(a(n),e((function(e){e.trebleNotes=t})))},style:{opacity:o===n?1:.7},children:"Make note ".concat(t.map((function(e){return e.noteName})).toString())},n)})),Object(M.jsx)(ve,{children:"Select Bass note:"}),le.map((function(t,n){return Object(M.jsx)("button",{onClick:function(){u===n?(i(null),e((function(e){e.bassNote=null}))):(i(n),e((function(e){e.bassNote=t})))},style:{opacity:u===n?1:.7},children:"Make note ".concat(t.noteName)},t.noteName)}))]})},fe=Object(h.b)(u||(u=Object(N.a)(["\n  body {\n    background-color: ",";\n    font-family: 'Karla', sans-serif;\n    color: ",";\n  }\n"])),(function(e){return e.theme.neutral.dark}),(function(e){return e.theme.neutral.light})),Ne={primary:{dark:"#5146D9",medium:"#9D70FC",light:"#BDA1F6"},secondary:{cool:"#95CEE0"},highlights:{hot:"#FF6D3F",bright:"#FFEC3F"},neutral:{dark:"#1D1763",medium:"#8A87AC",light:"#F0F0F0"}},he=function(e){var t=e.children;return Object(M.jsxs)(h.a,{theme:Ne,children:[Object(M.jsx)(fe,{})," ",t]})},je=h.c.h1(i||(i=Object(N.a)(["\n  color: ",";\n"])),(function(e){return e.theme.neutral.medium})),ve=h.c.h3(s||(s=Object(N.a)(["\n  color: ",";\n"])),(function(e){return e.theme.neutral.medium})),xe=h.c.span(m||(m=Object(N.a)(["\n  color: ",";\n  background-color: ",";\n"])),(function(e){return e.theme.neutral.dark}),(function(e){return e.theme.secondary.cool})),Oe=function(){return Object(M.jsx)(w,{children:Object(M.jsx)(he,{children:Object(M.jsxs)("div",{children:[Object(M.jsxs)("header",{children:[Object(M.jsx)(je,{children:"Circle of Fifths Viz"}),"The ",Object(M.jsx)(xe,{children:"Blue Key Center arc"})," ","highlights the (major) key centers your chord could belong within (if any)"]}),Object(M.jsx)(de,{}),Object(M.jsx)(me,{})]})})})};f.a.render(Object(M.jsx)(l.a.StrictMode,{children:Object(M.jsx)(Oe,{})}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.bae1e245.chunk.js.map